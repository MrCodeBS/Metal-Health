<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MindBot - Your Psychology Insights Companion</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  </head>
  <body>
    <header>
      <h1>MindBot</h1>
      <p class="tagline">Friendly, private psychology insights</p>
      <div id="auth-section">
        <div id="auth-buttons">
          <button id="show-login">Login</button>
          <button id="show-register">Register</button>
        </div>
        <div id="user-info" style="display: none">
          <span id="username-display"></span>
          <button id="logout-btn">Logout</button>
        </div>
      </div>
    </header>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="modal-title">Login</h2>
        <form id="auth-form">
          <div id="username-field" style="display: none">
            <label for="auth-username">Username:</label>
            <input
              type="text"
              id="auth-username"
              placeholder="Choose a username"
            />
          </div>
          <div>
            <label for="auth-email">Email:</label>
            <input
              type="email"
              id="auth-email"
              required
              placeholder="your@email.com"
            />
          </div>
          <div>
            <label for="auth-password">Password:</label>
            <input
              type="password"
              id="auth-password"
              required
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            />
          </div>
          <button type="submit" id="auth-submit">Login</button>
        </form>
        <div id="auth-error" class="error-msg"></div>
      </div>
    </div>

    <div id="app-content" style="display: none">
      <div class="cards">
        <!-- Personality Card -->
        <div class="card">
          <h2>üß† Personality</h2>
          <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px">
            Discover your Big Five personality traits
          </p>
          <button
            id="start-assessment"
            style="
              background: linear-gradient(135deg, #00d4ff, #a855f7);
              border: none;
              font-weight: 600;
            "
          >
            START PERSONALITY ASSESSMENT
          </button>
          <div style="margin-top: 20px">
            <label
              style="
                margin-bottom: 10px;
                display: block;
                font-size: 1rem;
                font-weight: 500;
                color: #00d4ff;
              "
              >üìä Your profile</label
            >
            <canvas id="personalityRadar" width="300" height="300"></canvas>
          </div>
        </div>

        <!-- Mood Card -->
        <div class="card">
          <h2>üí≠ Mood</h2>
          <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px">
            Track your emotional wellbeing
          </p>
          <button
            id="mood-checkin-btn"
            style="
              background: linear-gradient(135deg, #ec4899, #a855f7);
              border: none;
              font-weight: 600;
            "
          >
            TAKE 5-MINUTE MOOD CHECK
          </button>
          <div style="margin-top: 20px">
            <label
              style="
                margin-bottom: 10px;
                display: block;
                font-size: 1rem;
                font-weight: 500;
                color: #ec4899;
              "
            >
              üìà Mood
            </label>
            <canvas id="moodChart" width="400" height="200"></canvas>
          </div>
        </div>

        <!-- Health Metrics Card (NEW) -->
        <div class="card" id="health-metrics-card">
          <h2>üíö Health Metrics</h2>
          <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px">
            Your physical health summary (last 30 days)
          </p>
          <div id="health-metrics-display">
            <p style="color: #00d4ff">‚è≥ Loading health data...</p>
          </div>
          <button
            id="refresh-health-btn"
            style="margin-top: 10px; background: #6366f1"
          >
            üîÑ Refresh Data
          </button>
        </div>

        <!-- DBT Skills Card -->
        <div class="card">
          <h2>üßò DBT Skills</h2>
          <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px">
            Evidence-based crisis & coping skills
          </p>
          <button id="get-dbt-crisis">Crisis Skills (TIPP)</button>
          <button id="get-dbt-grounding" style="margin-top: 8px">
            Grounding (5-4-3-2-1)
          </button>
          <div id="dbt-skill" style="margin-top: 15px"></div>
        </div>

        <!-- Ergotherapy Card (NEW) -->
        <div class="card" id="ergotherapy-card">
          <h2>üå± Wellness Check-In</h2>
          <p
            style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px"
            id="ergo-prompt"
          >
            Optional activities to support your daily life (no pressure!)
          </p>
          <div id="ergo-activities" style="display: none">
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
                margin-bottom: 15px;
              "
            >
              <button
                class="ergo-activity-btn"
                data-activity="energyManagement"
              >
                üîã Energy Check
              </button>
              <button class="ergo-activity-btn" data-activity="dailyActivities">
                üè† Daily Tasks
              </button>
              <button class="ergo-activity-btn" data-activity="workLifeBalance">
                ‚öñÔ∏è Work Balance
              </button>
              <button class="ergo-activity-btn" data-activity="painDiscomfort">
                ü©π Comfort Check
              </button>
            </div>
          </div>
          <button id="show-ergo-activities" style="background: #10b981">
            ‚ú® Try a Wellness Activity
          </button>
          <div id="ergo-content" style="margin-top: 15px"></div>
        </div>

        <!-- Apple Health Card -->
        <div class="card">
          <h2>üçé Apple Health Integration</h2>
          <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 15px">
            Import your health data to correlate with mood
          </p>

          <div
            style="
              background: rgba(0, 212, 255, 0.1);
              padding: 15px;
              border-radius: 8px;
              margin-bottom: 15px;
              font-size: 0.9em;
            "
          >
            <strong>How to export:</strong><br />
            1. Open Health app on iPhone<br />
            2. Tap your profile picture (top right)<br />
            3. Scroll down ‚Üí "Export All Health Data"<br />
            4. Share/Save the ZIP file<br />
            5. Upload it here
          </div>

          <input
            type="file"
            id="health-file-input"
            accept=".zip"
            style="margin-bottom: 10px; display: block"
          />
          <button id="upload-health-btn">üì§ Upload Apple Health Data</button>
          <button
            id="view-health-summary-btn"
            style="margin-top: 8px; background: #6366f1"
          >
            üìä View Health Summary
          </button>

          <div id="health-status" style="margin-top: 15px"></div>
          <div id="health-summary" style="margin-top: 15px"></div>
        </div>

        <!-- Technique Card -->
        <div class="card">
          <h2>Technique</h2>
          <button id="get-breathing">Get breathing exercise</button>
          <div id="technique"></div>
        </div>

        <!-- Insight Card -->
        <div class="card">
          <h2>Insight</h2>
          <button id="random-fact">Random psychology insight</button>
          <div id="fact"></div>
        </div>
      </div>

      <!-- Chat Section -->
      <div class="chat-section">
        <div class="chat-card">
          <h2>AI Mental Health Assistant</h2>
          <div id="chat-messages"></div>
          <div class="chat-input-area">
            <input
              type="text"
              id="chat-input"
              placeholder="Ask me anything about mental health..."
            />
            <button id="send-btn">Send</button>
          </div>
          <p class="chat-note">
            This AI provides general information only. For mental health
            emergencies, call 988 (US) or your local crisis line.
          </p>
        </div>
      </div>

      <div class="disclaimer">
        MindBot is for educational purposes. Not a substitute for professional
        mental health care. If you're in crisis, please contact a mental health
        professional or emergency services.
      </div>
    </div>

    <!-- Mood Check-in Modal -->
    <div id="mood-modal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="mood-close">&times;</span>
        <h2>Daily Mood Check-in</h2>
        <form id="mood-form">
          <div>
            <label for="mood-score">How are you feeling? (1-10)</label>
            <input
              type="number"
              id="mood-score"
              min="1"
              max="10"
              value="5"
              required
            />
          </div>
          <div>
            <label for="stress-score">Stress level? (1-10)</label>
            <input
              type="number"
              id="stress-score"
              min="1"
              max="10"
              value="5"
              required
            />
          </div>
          <div>
            <label for="mood-notes">Any notes? (optional)</label>
            <textarea
              id="mood-notes"
              rows="3"
              placeholder="How's your day going?"
            ></textarea>
          </div>
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
